webpackJsonp([36],{Q09E:function(e,t){},ht4A:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("6iV/"),s=o.n(r),a={data:function(){var e=this;return{buttonName:"获取验证码",time:60,isDisabled:!1,ok:"",http:this.$store.state.dialog.http,imgCodeUrl:"",phone:this.$store.state.dialog.phone,ruleForm2:{pass:"",checkPass:"",imageCode:"",phoneCode:""},rules2:{pass:[{validator:function(t,o,r){""===o||o.length<8?r(new Error("请输入8位以上密码")):(""!==e.ruleForm2.checkPass&&e.ruleForm2.checkPass.length>=8&&e.$refs.ruleForm2.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(t,o,r){""===o?r(new Error("请再次输入密码")):o!==e.ruleForm2.pass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],imageCode:[{validator:function(e,t,o){""===t?o(new Error("不能为空")):o()},trigger:"blur"}],phoneCode:[{validator:function(t,o,r){if(""===o)return r(new Error("不能为空")),!1;e.validateCode(function(e){if(0==e)return r(new Error("图形验证码或手机验证码错误")),!1;r()})},trigger:"blur"}]}}},mounted:function(){this.changeCode()},methods:{sendMsg:function(){var e=this;e.isDisabled=!0;var t=window.setInterval(function(){e.buttonName=e.time+"秒后重新发送",--e.time,e.time<0&&(e.buttonName="重新发送",e.time=10,e.isDisabled=!1,window.clearInterval(t))},1e3)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message("请将字段填写完整"),!1;t.editPassWord(),t.$message("修改中")})},resetForm:function(e){this.$refs[e].resetFields()},changeCode:function(){this.imgCodeUrl=this.http+"/code.do?t="+(new Date).getTime()},getPhoneCode:function(){this.sendMsg(),this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/sendCode",s.a.stringify({phone:this.phone})).then(function(e){console.log(e)})},editPassWord:function(){var e=this;this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/editPassword",s.a.stringify({loginPhone:this.phone,transactionPassword:this.ruleForm2.pass,pictureCode:this.ruleForm2.imageCode,code:this.ruleForm2.phoneCode})).then(function(t){200==t.data.code?(e.$message({type:"success",message:"修改成功!"}),e.$router.openPage("/mycenter/home")):e.$message({type:"warning",message:t.data.message})})},validateCode:function(e){var t=this;this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/validateCode",s.a.stringify({phone:this.phone,pictureCode:this.ruleForm2.imageCode,code:this.ruleForm2.phoneCode})).then(function(o){200==o.data.code?(console.log(o.data),e(!0),t.editPassWord()):e(!1)})}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box"},[o("el-breadcrumb",{staticStyle:{padding:"24px"},attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/myCenter/home"}}},[e._v("个人中心")]),e._v(" "),o("el-breadcrumb-item",[e._v("资金密码管理")])],1),e._v(" "),o("el-form",{ref:"ruleForm2",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"已验证手机",prop:"phone"}},[o("el-col",{attrs:{span:11}},[o("el-input",{attrs:{type:"text",disabled:!0,"auto-complete":"off"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"pass"}},[o("el-col",{attrs:{span:11}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请务必设置8位以上密码",placement:"right"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[o("el-col",{attrs:{span:11}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请确认密码",placement:"right"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"验证码",prop:"imageCode"}},[o("el-col",{staticStyle:{"margin-top":"0"},attrs:{span:6}},[o("el-input",{attrs:{placeholder:"请输入验证码","auto-complete":"off",clearable:""},model:{value:e.ruleForm2.imageCode,callback:function(t){e.$set(e.ruleForm2,"imageCode",t)},expression:"ruleForm2.imageCode"}})],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("span",{staticClass:"img-validate-code"},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点图片重新获取验证码",placement:"right"}},[o("img",{attrs:{id:"codeimg",src:e.imgCodeUrl},on:{click:function(t){e.changeCode()}}})])],1)])],1),e._v(" "),o("el-form-item",{attrs:{label:"手机验证码",prop:"phoneCode"}},[o("el-col",{staticStyle:{"margin-top":"0"},attrs:{span:6}},[o("el-input",{attrs:{placeholder:"请输入手机验证码","auto-complete":"off",clearable:""},model:{value:e.ruleForm2.phoneCode,callback:function(t){e.$set(e.ruleForm2,"phoneCode",t)},expression:"ruleForm2.phoneCode"}})],1),e._v(" "),o("el-col",{staticClass:"get_btn",attrs:{span:5}},[o("el-button",{attrs:{disabled:e.isDisabled},on:{click:function(t){e.getPhoneCode()}}},[e._v(e._s(e.buttonName))])],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm2")}}},[e._v("提交")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("ruleForm2")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var n=o("vSla")(a,i,!1,function(e){o("Q09E")},null,null);t.default=n.exports}});