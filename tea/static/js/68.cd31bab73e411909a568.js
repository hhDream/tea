webpackJsonp([68],{"1YkD":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("6iV/"),r=o.n(s),a={data:function(){var e=this;return{buttonName:"发送短信",isDisabled:!1,time:60,ok:"",http:this.$store.state.dialog.http,imgCodeUrl:"",phone:this.$store.state.dialog.phone,ruleForm2:{pass:"",checkPass:"",imageCode:"",phoneCode:""},rules2:{pass:[{validator:function(t,o,s){""===o||o.length<8?s(new Error("请输入8位以上密码")):(""!==e.ruleForm2.checkPass&&e.ruleForm2.checkPass.length>=8&&e.$refs.ruleForm2.validateField("checkPass"),s())},trigger:"blur"}],checkPass:[{validator:function(t,o,s){""===o?s(new Error("请再次输入密码")):o!==e.ruleForm2.pass?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],imageCode:[{validator:function(e,t,o){""===t?o(new Error("不能为空")):o()},trigger:"blur"}],phoneCode:[{validator:function(t,o,s){if(""===o)return s(new Error("不能为空")),!1;e.validateCode(function(e){if(0==e)return s(new Error("图形验证码或手机验证码错误")),!1;s()})},trigger:"blur"}]}}},mounted:function(){this.changeCode()},methods:{sendMsg:function(){var e=this;e.isDisabled=!0;var t=window.setInterval(function(){e.buttonName=e.time+"秒后重新发送",--e.time,e.time<0&&(e.buttonName="重新发送",e.time=10,e.isDisabled=!1,window.clearInterval(t))},1e3)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log(e),t.$message("请按照提示修改字段"),!1;t.editPassWord(),t.$message("修改中")})},resetForm:function(e){this.$refs[e].resetFields()},changeCode:function(){this.imgCodeUrl=this.http+"/code.do?t="+(new Date).getTime()},getPhoneCode:function(){this.sendMsg(),this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/sendCode",r.a.stringify({phone:this.phone})).then(function(e){console.log(e)})},editPassWord:function(){var e=this;this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/editPassword",r.a.stringify({loginPhone:this.phone,loginPassword:this.ruleForm2.pass})).then(function(t){200==t.data.code?(e.clearCookie(),e.$message({type:"success",message:"即将跳回登陆页!"}),location.reload()):e.$message({type:"info",message:"修改失败!"}),console.log(t)})},clearCookie:function(){this.setCookie("JSESSIONID","",-1),this.setCookie("ENTER_ID","",-1),this.setCookie("LOGIN_PHONE","",-1)},setCookie:function(e,t,o){var s=new Date;s.setDate(s.getDate()+o),document.cookie=e+"="+escape(t)+(null==o?"":";expires="+s.toGMTString())},validateCode:function(e){this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/validateCode",r.a.stringify({phone:this.phone,pictureCode:this.ruleForm2.imageCode,code:this.ruleForm2.phoneCode})).then(function(t){200==t.data.code?(console.log(t.data),e(!0)):e(!1)})},tips:function(){var e=this;this.$confirm("此操作将修改您的密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.validateCode()}).catch(function(){e.$message({type:"info",message:"已取消修改"})})}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box"},[o("el-breadcrumb",{staticStyle:{padding:"24px"},attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/myUserCenter/userHome"}}},[e._v("个人中心")]),e._v(" "),o("el-breadcrumb-item",{attrs:{to:{path:""}}},[e._v("我的账号")]),e._v(" "),o("el-breadcrumb-item",[e._v("密码管理")])],1),e._v(" "),o("el-form",{ref:"ruleForm2",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"已验证手机",prop:"phone"}},[o("el-col",{attrs:{span:11}},[o("el-input",{attrs:{type:"text",disabled:!0,"auto-complete":"off"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"pass"}},[o("el-col",{attrs:{span:11}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请务必设置8位以上密码",placement:"right"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[o("el-col",{attrs:{span:11}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请确认密码",placement:"right"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"验证码",prop:"imageCode"}},[o("el-col",{staticStyle:{"margin-top":"0"},attrs:{span:6}},[o("el-input",{attrs:{placeholder:"请输入验证码","auto-complete":"off",clearable:""},model:{value:e.ruleForm2.imageCode,callback:function(t){e.$set(e.ruleForm2,"imageCode",t)},expression:"ruleForm2.imageCode"}})],1),e._v(" "),o("el-col",{attrs:{span:5}},[o("span",{staticClass:"img-validate-code"},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点图片重新获取验证码",placement:"right"}},[o("img",{attrs:{id:"codeimg",src:e.imgCodeUrl},on:{click:function(t){e.changeCode()}}})])],1)])],1),e._v(" "),o("el-form-item",{attrs:{label:"手机验证码",prop:"phoneCode"}},[o("el-col",{staticStyle:{"margin-top":"0"},attrs:{span:6}},[o("el-input",{attrs:{placeholder:"请输入手机验证码",clearable:""},model:{value:e.ruleForm2.phoneCode,callback:function(t){e.$set(e.ruleForm2,"phoneCode",t)},expression:"ruleForm2.phoneCode"}})],1),e._v(" "),o("el-col",{staticClass:"get_btn",attrs:{span:5}},[o("el-button",{attrs:{disabled:e.isDisabled},on:{click:function(t){e.getPhoneCode()}}},[e._v(e._s(e.buttonName))])],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm2")}}},[e._v("提交")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("ruleForm2")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var n=o("vSla")(a,i,!1,function(e){o("B4P/")},null,null);t.default=n.exports},"B4P/":function(e,t){}});