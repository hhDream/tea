webpackJsonp([74],{IKkP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("6iV/"),r=a.n(s),l={inject:["reload"],methods:{getData:function(){var e=this;this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/tteaOrder",r.a.stringify({enterpriseCode:this.enterpriseCode,currentPage:this.currentPage,showCount:this.showCount,coodsName:this.goodsName,takeTeaOrderCode:this.takeTeaOrderCode,loginAccount:this.loginAccount,status:this.value,startTime:this.times[0],endTime:this.times[1]})).then(function(t){e.tableData=JSON.parse(t.data.data).data,e.total=JSON.parse(t.data.data).total,console.log(JSON.parse(t.data.data)),e.currentPage=JSON.parse(t.data.data).currentPage})},takeFmt:function(e,t){return 1==e.status?this.takeIt="确认":2==e.status?this.takeIt="填写物流单号":this.takeIt="查看单号"},statusFmt:function(e,t){return 1==e.status?"已申请":2==e.status?"出库中":3==e.status?"已发货":4==e.status?"已到店":5==e.status?"待取货":6==e.status?"待收货":7==e.status?"确认收货":"未知"},findGoodDetail:function(e){var t=this;this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/showLogistics",r.a.stringify({id:e.id})).then(function(e){var a=JSON.parse(e.data.data),s='<div class="content_left">物流公司:'+a.enterLogisticsCompanyName+"<br>物流单号:"+a.enterLogisticsOrderId+"<br>商品代码:"+a.goodsCode+"<br>商品名称:"+a.coodsName+"<br>提货数量:"+a.takeTeaCount+"<br>经销商名称:"+a.distributorName+"</div>";t.$alert(s,"查看物流",{dangerouslyUseHTMLString:!0})})},goodsDetailAlt:function(e){var t=this,a='<div class="content_left"> <p>提货单号:'+e.takeTeaOrderCode+"</p><p>商品代码:"+e.goodsCode+"</p><p>商品名称:"+e.goodsName+"</p><p>提货数量:"+e.takeTeaCount+"</p><p>经销商账号:"+e.loginAccount+"</p><p>经销商名称:"+e.distributorName+"</p></div>";this.$confirm(a,"确认订单",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.axios.post(t.http+"/interface/pc/personal/pcEnterprise/editTeaOrderStatus",r.a.stringify({id:e.id,status:2,cqEnterLogisticsCompanyName:"",cqEnterLogisticsOrderId:""})).then(function(e){t.$message({type:"success",message:"确认成功!"}),t.reload()})}).catch(function(){t.$message({type:"info",message:"已取消确认"})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.submit_logistics()})},resetForm:function(e){this.$refs[e].resetFields()},submit_logistics:function(){var e=this;this.axios.post(this.http+"/interface/pc/personal/pcEnterprise/editTeaOrderStatus",r.a.stringify({id:this.id,status:3,cqEnterLogisticsCompanyName:this.ruleForm.cqEnterLogisticsCompanyName,cqEnterLogisticsOrderId:this.ruleForm.cqEnterLogisticsOrderId})).then(function(t){console.log(t),e.$message({type:"info",message:"填写物流信息成功!"}),e.reload()})},handleClick:function(e){console.log(e),1!=e.status&&2!=e.status?this.findGoodDetail(e):1==e.status?this.goodsDetailAlt(e):(this.innerVisible=!0,this.id=e.id)},handleSizeChange:function(e){console.log(e),this.showCount=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},search:function(){this.getData()}},created:function(){this.getData()},data:function(){return{tableData:[],http:this.$store.state.dialog.http,enterpriseCode:this.$store.state.dialog.enterpriseCode,currentPage:1,showCount:10,goodsName:"",goodsCode:"",loginAccount:"",times:"",takeTeaOrderCode:"",total:0,options:[{value:"",label:"全部"},{value:"1",label:"已申请"},{value:"2",label:"出库中"},{value:"3",label:"已取货"},{value:"4",label:"已到店"},{value:"5",label:"待取货"},{value:"6",label:"待收货"},{value:"7",label:"确认收货"}],value:"",takeIt:"",innerVisible:!1,ruleForm:{cqEnterLogisticsCompanyName:"",cqEnterLogisticsOrderId:""},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},cqEnterLogisticsCompanyNameList:[{value:"EMS",label:"EMS"},{value:"申通快递",label:"申通快递"},{value:"顺丰速运",label:"顺丰速运"},{value:"圆通速递",label:"圆通速递"},{value:"韵达速递",label:"韵达速递"},{value:"中通快递",label:"中通快递"},{value:"天天快递",label:"天天快递"},{value:"其他",label:"其他"}],rules:{cqEnterLogisticsCompanyName:[{required:!0,message:"请选择物流公司",trigger:"blur"}],cqEnterLogisticsOrderId:[{required:!0,message:"请输入物流单号",trigger:"blur"}]}}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{padding:"24px","padding-left":"0"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/myCenter/home"}}},[e._v("个人中心")]),e._v(" "),a("el-breadcrumb-item",[e._v("提货明细")])],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:24}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"demonstration"},[e._v("提货单号:")]),e._v(" "),a("el-input",{attrs:{clearable:""},model:{value:e.takeTeaOrderCode,callback:function(t){e.takeTeaOrderCode=t},expression:"takeTeaOrderCode"}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"demonstration"},[e._v("商品名称:")]),e._v(" "),a("el-input",{attrs:{clearable:""},model:{value:e.goodsName,callback:function(t){e.goodsName=t},expression:"goodsName"}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"demonstration"},[e._v("经销商账号:")]),e._v(" "),a("el-input",{attrs:{clearable:""},model:{value:e.loginAccount,callback:function(t){e.loginAccount=t},expression:"loginAccount"}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"demonstration"},[e._v("当前状态:")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",{staticClass:"demonstration"},[e._v("时间")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",format:"yyyy 年 MM 月 dd 日","picker-options":e.pickerOptions2},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1)]),e._v(" "),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:6}},[a("el-button",{staticStyle:{"margin-top":"19px"},attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}}),e._v(" "),a("el-button",{on:{click:function(t){e.times=e.value=e.loginAccount=e.goodsName=e.takeTeaOrderCode=""}}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","font-size":"12px"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"takeTeaOrderCode",fixed:"",align:"center",label:"提货单号",width:"170"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",align:"center",label:"商品代码",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"takeTeaCount",align:"center",label:"提货数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.takeTeaCount?t.row.takeTeaCount:"0")+"  "+e._s(t.row.benchmarkingUnit3))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"applyTime",align:"center",label:"申请时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginAccount",align:"center",label:"经销商账号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"distributorName",align:"center",label:"经销商名称",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"center",label:"手机号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"postalAddress",align:"center",label:"地址",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"legalPersonName",align:"center",label:"法人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"warehousingFee",align:"center",label:"仓储费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.warehousingFee?t.row.warehousingFee:"0")+" 元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.statusFmt,align:"center",label:"当前状态"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",formatter:e.takeFmt,align:"center",label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClick(t.row)}}},[e._v("\n    "+e._s(1==t.row.status?"确认":2==t.row.status?"填写物流单号":"查看单号")+"\n  ")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"修改配额",visible:e.innerVisible},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"物流公司:",prop:"cqEnterLogisticsCompanyName"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.cqEnterLogisticsCompanyName,callback:function(t){e.$set(e.ruleForm,"cqEnterLogisticsCompanyName",t)},expression:"ruleForm.cqEnterLogisticsCompanyName"}},e._l(e.cqEnterLogisticsCompanyNameList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"物流单号:",prop:"cqEnterLogisticsOrderId"}},[a("el-input",{model:{value:e.ruleForm.cqEnterLogisticsOrderId,callback:function(t){e.$set(e.ruleForm,"cqEnterLogisticsOrderId",t)},expression:"ruleForm.cqEnterLogisticsOrderId"}})],1),e._v(" "),a("el-row",{staticStyle:{"text-align":"right"},attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)],1)},staticRenderFns:[]},i=a("vSla")(l,n,!1,null,null,null);t.default=i.exports}});