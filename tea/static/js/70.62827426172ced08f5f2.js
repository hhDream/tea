webpackJsonp([70],{QRzM:function(t,e){},"VI+G":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("6iV/"),i=o.n(a),s={inject:["reload"],methods:{getData:function(){var t=this;this.axios.post(this.http+"/interface/pc/personal/PcRetailGuidancePrice/priceList",i.a.stringify({enterpriseId:this.enterpriseCode,currentPage:this.currentPage,showCount:this.showCount,goodsName:this.goodsName,goodsCode:this.goodsCode})).then(function(e){t.tableData=JSON.parse(e.data.data).data,t.total=JSON.parse(e.data.data).total,console.log(JSON.parse(e.data.data)),t.currentPage=JSON.parse(e.data.data).currentPage})},handleClick:function(t){console.log(t),this.dialogFormVisible=!0,this.form.goodsName=t.goodsName,this.form.goodsCode=t.goodsCode,this.form.benchmarkingUnit=t.benchmarkingUnit,this.form.nowPrice=t.nowPrice,this.row=t},editIt:function(){var t=this;this.axios.post(this.http+"/interface/pc/personal/PcRetailGuidancePrice/saveRetail",i.a.stringify({enterpriseId:98980889,goodsName:this.row.goodsName,goodsCode:this.row.goodsCode,nowPrice:this.form.nowPrice,releasePrice:this.row.releasePrice,benchmarkingUnit3:this.row.benchmarkingUnit3,realseCode:this.row.realseCode})).then(function(e){console.log(e),200==e.data.code?t.reload():t.$message({type:"info",message:"修改失败了!"})}).catch(function(e){t.$message({type:"info",message:"修改失败了!"+e})})},showHis:function(t){var e=this;this.dialogFormVisible2=!0,this.row=t,this.axios.post(this.http+"/interface/pc/personal/PcRetailGuidancePrice/showHistory",i.a.stringify({currentPage:this.currentPage2,goodsCode:this.row.goodsCode,showCount:this.showCount2})).then(function(t){console.log(JSON.parse(t.data.data)),e.tableData2=JSON.parse(t.data.data).data,console.log(e.tableData2),e.total2=JSON.parse(t.data.data).total})},handleSizeChange:function(t){console.log(t),this.showCount=t,this.getData()},handleSizeChange2:function(t){console.log(t),this.showCount2=t,this.showHis(this.row)},handleCurrentChange:function(t){this.currentPage=t,this.getData()},handleCurrentChange2:function(t){this.currentPage2=t,this.showHis(this.row)},search:function(){this.getData()}},created:function(){this.getData()},data:function(){return{tableData:[],tableData2:[],http:this.$store.state.dialog.http,enterpriseCode:this.$store.state.dialog.enterpriseCode,currentPage:1,showCount:10,currentPage2:1,showCount2:10,goodsName:"",goodsCode:"",total:0,total2:0,dialogFormVisible:!1,dialogFormVisible2:!1,formLabelWidth:"120px",form:{nowPrice:1,benchmarkingUnit:"",goodsName:"",goodsCode:""}}}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-breadcrumb",{staticStyle:{padding:"24px","padding-left":"0"},attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/myCenter/home"}}},[t._v("个人中心")]),t._v(" "),o("el-breadcrumb-item",[t._v("零售指导价")])],1),t._v(" "),o("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("span",{staticClass:"demonstration"},[t._v("商品代码")]),t._v(" "),o("el-input",{attrs:{clearable:""},model:{value:t.goodsCode,callback:function(e){t.goodsCode=e},expression:"goodsCode"}})],1)]),t._v(" "),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("span",{staticClass:"demonstration"},[t._v("商品名称")]),t._v(" "),o("el-input",{attrs:{clearable:""},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}})],1)]),t._v(" "),o("el-col",{attrs:{span:6}}),t._v(" "),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple"},[o("el-button",{staticStyle:{"margin-top":"19px"},attrs:{icon:"el-icon-search",circle:""},on:{click:t.search}})],1)])],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[o("el-table-column",{attrs:{fixed:"",prop:"goodsCode",label:"商品代码",width:"120"}}),t._v(" "),o("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",width:"120"}}),t._v(" "),o("el-table-column",{attrs:{prop:"releasePrice",label:"抢购价格",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.releasePrice?e.row.releasePrice:"0")+" 元/"+t._s(e.row.benchmarkingUnit3))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"nowPrice",label:"当前零售指导价(元)",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.nowPrice?e.row.nowPrice:"0")+" 元/"+t._s(e.row.benchmarkingUnit3))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"setTime",label:"设置时间"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){t.handleClick(e.row)}}},[t._v("设置指导价")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(o){t.showHis(e.row)}}},[t._v("查看历史设置")])]}}])})],1),t._v(" "),o("div",{staticClass:"block"},[o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),o("el-dialog",{attrs:{title:"修改指导价",width:"30%",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{staticStyle:{"border-bottom":"1px solid #ddd"},attrs:{label:"商品名称","label-width":t.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},domProps:{textContent:t._s(t.form.goodsName)}})],1),t._v(" "),o("el-form-item",{staticStyle:{"border-bottom":"1px solid #ddd"},attrs:{label:"商品代码","label-width":t.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},domProps:{textContent:t._s(t.form.goodsCode)}})],1),t._v(" "),o("el-form-item",{attrs:{label:"设置指导价","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"deal",staticStyle:{width:"100px"},attrs:{type:"number","auto-complete":"off"},model:{value:t.form.nowPrice,callback:function(e){t.$set(t.form,"nowPrice",e)},expression:"form.nowPrice"}}),o("span",[t._v("元/"+t._s(this.form.benchmarkingUnit))])],1)],1),t._v(" "),o("div",{staticStyle:{},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.editIt}},[t._v("确 定")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"查看指导价历史",visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2}},[o("el-table-column",{attrs:{prop:"setTime",label:"设置时间"}}),t._v(" "),o("el-table-column",{attrs:{prop:"nowPrice",label:"零售指导价"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.nowPrice?e.row.nowPrice:"0")+" 元/"+t._s(e.row.benchmarkingUnit))])]}}])})],1),t._v(" "),o("div",{staticStyle:{},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("确 定")])],1),t._v(" "),o("div",{staticClass:"block"},[o("el-pagination",{attrs:{"current-page":t.currentPage2,"page-sizes":[10,20,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total2},on:{"size-change":t.handleSizeChange2,"current-change":t.handleCurrentChange2}})],1)],1)],1)},staticRenderFns:[]};var n=o("vSla")(s,r,!1,function(t){o("QRzM")},null,null);e.default=n.exports}});